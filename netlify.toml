[build]
  base = "."
  command = "npm install --legacy-peer-deps && ./node_modules/.bin/preconstruct build && npm run build --workspace=@gephi/gephi-lite"
  publish = "packages/gephi-lite/build"

[build.environment]
  # Override the default /gephi-lite/ base so the SPA works from the Netlify site root.
  BASE_URL = "/"
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
